# 3.1 工程师的控制台：调节幻觉的四个关键“旋钮”

在上一篇关于“根本原因”的文章中，我们达成了一个共识：**幻觉（Hallucination）是 LLM 的 Feature（特性），而不是 Bug。** 它本质上是模型在概率空间里的“联想”和“创造”。

既然是 Feature，那就不应该一味地“消除”，而应该学会**“管理”**。

这就好比你手下有一个才华横溢但容易跑偏的员工。

- 让他去**查账**，你得死死盯着他，不许他有半点发挥。
- 让他去**搞头脑风暴**，你就得给他倒杯酒，让他随便侃。

作为工程师，我们需要根据任务场景，手握几个关键的“旋钮”，精准控制模型的幻觉程度。

---

## 一、 你的“控制台”：调节幻觉的四个旋钮

在讨论具体场景之前，先看看我们手里的武器。

### 1. 旋钮一：温度（Temperature）与采样参数

这是最基础的物理层控制。

- **低温（0 - 0.3）**：**强力抑制**。
  - 原理：极度锐化概率分布，让“最大概率词”的优势压倒一切。
  - 效果：模型“只敢说最有把握的话”，逻辑严密，但可能枯燥。
- **中高温（0.7 - 1.2）**：**放松管制甚至主动放大**。
  - **T < 1.0（如 0.8）**：虽然数学上仍是“抑制”（Logits 差距被拉大），但程度较轻，保留了丰富的“联想”空间。
  - **T > 1.0**：真正的“放大”（Flatten），强行提升低概率词的被选机会，制造“意外”。

### 2. 旋钮二：上下文锚点（Context Grounding / RAG）

这是给模型“外挂”知识库。

- **给资料（Closed-book）**：强迫模型“只根据我给的内容回答”。
  - 效果：**抑制幻觉**。模型变成了“阅读理解机器”，不再调用它那容易出错的内部记忆。
- **不给资料（Open-book）**：允许模型调用它的“大脑记忆”（训练数据）。
  - 效果：**听天由命**。准确性完全取决于它的训练数据质量。

### 3. 旋钮三：结构化输出（Structured Output / JSON Mode）

这是对输出形式的强约束。

- **强制 Schema**：要求模型输出符合特定 JSON 格式的数据。
- 效果：**抑制幻觉**。这是目前抑制“格式幻觉”和“内容跑偏”的最强手段之一。当模型必须填充 `{ "risk_level": "..." }` 时，它会收敛发散思维，专注于分类。

### 4. 旋钮四：推理能力（Reasoning / CoT）

这是调用模型的“慢系统”（System 2）。

- **启用思考**：使用 o1/o3 或 DeepSeek R1 等具备“思维链”能力的推理模型。
- 效果：**大幅抑制逻辑幻觉**。它们会在输出答案前进行自我验证和纠错，像一个严谨的教授在草稿纸上推演。

---

## 下篇预告

手里有了这四个旋钮，我们该怎么组合使用？
是全部拉满，还是关掉其中几个？
针对**医疗咨询**、**小说创作**和**文本润色**这三种截然不同的任务，我们的参数配置策略有何不同？

请看下篇：《3.2 从绝对零度到酩酊大醉：不同场景下的幻觉实战策略》。
